<!DOCTYPE HTML>
<html>
<head>
 <link rel="stylesheet" type="text/css" href="cloudplaylists.css">
 <script type="text/javascript" src="https://w.soundcloud.com/player/api.js "></script>
<!--
<link rel="stylesheet" type="text/css" href="style.css">
-->

</head>
<body>
<!-- Main body starts here -->
<div id="main_body">
	<div id="header">
	<!-- START HEADER JSP -->
		You are logged in locally as michaellavelle. 
		<!-- Temporary hack to add space - remove when using CSS -->	
		&nbsp;
		<a href="#">Logout</a></p>
	<!-- END HEADER JSP -->
	</div>
	<!-- Insert top part (containing, image, links, buttons etc) here -->
		<div id="top_part">
			<div id="top_part_image">
				<div id="main_logo"><h1 class="cloudPlaylists">CloudPlaylists</h1></div>
				<div id="main_menu_bg1">
					<div id="main_menu_body1">
						<div id="menu_links">
							<a href="playlist.html">Home</a>
							<div class="importButton">
								<input type="submit" onclick="showLoading('Importing...')" id="importExFmLovedSongsSubmit" value="Import ExFm tracks" />

							</div>
							<div class="importButton">
								<input type="submit" onclick="showLoading('Importing...')" id="importSoundCloudFavoritesSubmit" value="Import SoundCloud favorites" />
							</div>
						</div>
					</div>
				</div>
			<div>	
	  	</div>
	



		<!-- Temporary hack to add space - remove when using CSS -->	
		&nbsp;
</div>
<!-- End Main body -->
<!-- Content body starts here -->
<div id="content_body">
	<!-- START CHOOSER JSP-->
	<div id="chooser" >
		<!-- Don't want to use this hr in real version - just here to divide the page for demo purposes -->	
		<hr/>
			Search for new music... 
			<input type="text" name="q" size=50 />
			<input id="searchSubmit" onclick="showLoading('Searching...')" type="submit" value="Search"/>
		<p>
			...or choose music from your playlists
		 <select id="playlistNameSelect" name="targetPlaylistName">
			<option value="january_2013" selected="selected">January 2013</option>
			<option value="soundcloud_2012">SoundCloud 2012</option>
		</select>
		<input id="playlistChangeSubmit" onclick="showLoading('Loading...')" type="submit" value="Show tracks" />
		<input id="loadSubmit" onclick="showLoading('Loading...')"  type="submit" value="Play this playlist"  />
	</p>
	</div>
	<!-- END CHOOSER JSP -->
	<!-- START RESULTS STATUS JSP -->
	<div id="rsContainer">

		<div  id="resultsStatus">
			<!-- Don't want to use this hr in real version - just here to divide the page for demo purposes -->	
			<hr/>

			<div id="loadedMessage"></div>
			<center><div id="loadingMessage"></div></center>

		</div>
	</div>
	<!-- END RESULTS STATUS JSP -->
	<!-- START PLAYER CONTAINER JSP -->

	<div id="player">
	
		<!--  START PLAYER JSP -->
	
		<!-- Don't want to use this hr in real version - just here to divide the page for demo purposes -->	
		<hr/>

		<div id="sc">
			<iframe id="sc-widget" width="100%" height="160" scrolling="no"
			frameborder="no" src="#"></iframe>

			<p>
				<a href="javascript:prevTrack();">Prev Track</a>
				 <a href="javascript:nextTrack();">Next Track</a>
			</p>
		</div>

		<div id="addToPlaylist">
	
		<!-- Temporary hack to add space - remove when using CSS -->	
		&nbsp;&nbsp;&nbsp;
	
				Add track to: 
	
				 <select id="playlistNameAddToSelect" name="targetPlaylistName">
					<option value="january_2013" selected="selected">January 2013</option>
					<option value="soundcloud_2012">SoundCloud 2012</option>
				</select> 
	
					<input type="submit" id="addToPlaylistBuilderSubmit" onclick="showPlayerStatus('Adding...');" value="Add" />

					<input type="submit" id="loveOnExFmSubmit" value="Love on ExFm" onclick="showPlayerStatus('Track loved on Ex.Fm');" /> 
		</div>

	<!--  END PLAYER JSP-->
	</div>
	<!-- END PLAYER CONTAINER -->

	<!-- START PLAYER STATUS -->

	<div id="playerStatus">
	</div>
	<!-- END PLAYER STATUS -->

	<!-- START PLAYLIST CONTAINER -->

	<!-- Don't want to use this hr in real version - just here to divide the page for demo purposes -->	
	<hr/>

	<div id="body" style="text-align: left; width: 100%; float: left;">
	<!-- START PLAYLIST -->

		 <select id="playlistNameLoadSelect" name="playlistName">
			<option value="january_2013" selected="selected">January 2013</option>
			<option value="soundcloud_2012">SoundCloud 2012</option>
		</select> 

		<input type="submit" id="loadSubmit" value="Load"  onclick="showPlayerStatus('Loading...');" />



		<h1>January 2013 by <a href="profile.html">michaellavelle</a></h1>
		<p><img src="http://userserve-ak.last.fm/serve/64/76366626.png"/></p>

		<a target="_blank" href="http://cloudplaylists.com/michaellavelle/january_2013">Open in legacy player</a>

		<table class="Playlist">

			<tr id="r0">
				<td class="segmentListItem" id="n0" ">1</td>
				<td class="segmentListItem" id="p0">You feat. Aaron Alexis</td>
				<td><a href="javascript:playTrack(0,'http%3A%2F%2Fsoundcloud.com%2Fmonsieuradi%2Fyou-feat-aaron-alexis');">Play</a></td>
				<td><input onclick="deleteTrack(0)" type="submit" value="x"></td>
			</tr>
			<tr id="r1">
				<td class="segmentListItem" id="n1" ">2</td>
				<td class="segmentListItem" id="p1">Solange - Losing You (Cyril Hahn Remix)</td>
				<td><a href="javascript:playTrack(1,'http%3A%2F%2Fsoundcloud.com%2Fcyrilhahn%2Fsolange-losing-you-cyril-hahn');">Play</a></td>
			
				<td><input onclick="deleteTrack(1)" type="submit" value="x"></td>
			</tr>
			<tr id="r2">
				<td class="segmentListItem" id="n2" ">3</td>
				<td class="segmentListItem" id="p2">Alpines - Chances (Cyril Hahn Remix)</td>
				<td><a href="javascript:playTrack(2,'http%3A%2F%2Fsoundcloud.com%2Falpines%2Fchances-cyril-hahn');">Play</a></td>
				<td><input onclick="deleteTrack(2)" type="submit" value="x"></td>
			</tr>

			<tr id="r3">
				<td class="segmentListItem" id="n3" ">4</td>
				<td class="segmentListItem" id="p3" draggable="true">Destiny&#039;s Child - Say My Name (Cyril Hahn Remix)</td>
				<td><a href="javascript:playTrack(3,'http%3A%2F%2Fsoundcloud.com%2Fcyrilhahn%2Fdestinys-child-say-my-name');">Play</a></td>
				<td><input onclick="deleteTrack(3)" type="submit" value="x"></td>
			</tr>

			<tr id="r4">
				<td class="segmentListItem" id="n4" ">5</td>
				<td class="segmentListItem" id="p4" draggable="true">Monsieur Adi - Coming Back To Life (Demo)</td>
				<td><a href="javascript:playTrack(4,'http%3A%2F%2Fsoundcloud.com%2Fkarmaartists%2Fmonsieur-adi-coming-back-to');">Play</a></td>
				<td><input onclick="deleteTrack(4)" type="submit" value="x"></td>
			</tr>

		</table>

		<!-- Temporary hack to add space - remove when using CSS -->	
		<p>&nbsp;</p>
		<p>&nbsp;</p>

	<!-- END PLAYLIST -->
	</div>
	<!-- END PLAYLIST CONTAINER -->
</div>
<!-- Content body ends here -->
</body>


<script type="text/javascript">

// Start Chooser JS

	function showLoading(message)
	{
		document.getElementById("loadedMessage").innerHTML = '';
		document.getElementById('loadingMessage').innerHTML =message;
		document.getElementById('rsContainer').className='';
		window.setTimeout(hideStatus,3000);
	}

// End Chooser JS

// Start Results Status JS

	function hideStatus()
	{
		document.getElementById("loadedMessage").innerHTML = '';
		document.getElementById('loadingMessage').innerHTML = '';
	}

// End Results Status JS

// Start Player Container JS
	function playTrack(trackNumberToPlay, encodedUrl) 
	{
		playTrackWithAutoplay(trackNumberToPlay,encodedUrl,"true");
	}

	function playTrackWithAutoplay(trackNumberToPlay, encodedUrl,autoplay) 
	{
		if (getUrls()[trackNumberToPlay]["deadLink"])
		{
			nextTrack();
			return;
		}
		trackNumber = trackNumberToPlay;
		
		var widgetIframe = document.getElementById('sc-widget');
		
		// Stop an error message being displayed while player is loaded by hiding player iframe		
		widgetIframe.height=0;
		
		widgetIframe.src = 'http://w.soundcloud.com/player/?url=' + encodedUrl + '&amp;show_artwork=true&amp;auto_play=' + autoplay;
		
		// Redisplay player iFrame on player has loaded
		widgetIframe.height=160;
		
		// Set the selected track CSS by clearing the style of all rows and setting the CSS of the selected track
		for (var i = 0; i < getUrls().length; i++)
		{
			document.getElementById("r" + i).className="";
		}

		document.getElementById("r" + trackNumber).className="current";

		// Bind the FINISH event to the player - a bug with SoundCloud means that this isn't working currently
		var widget = SC.Widget(widgetIframe);

		if ("true" == autoplay)
		{
			widget.load(getUrls()[trackNumber]["url"],{"auto_play":autoplay});
		}
		else
		{
			widget.load(getUrls()[trackNumber]["url"],{});
		}

	}

// End Player Container JS

// Start Player Status JS

	function showPlayerStatus(status)
	{
		document.getElementById("playerStatus").innerHTML='<center>' + status + '</center>';
		document.getElementById("playerStatus").className="";
		window.setTimeout(hidePlayerStatus,2000);
	}

	function hidePlayerStatus()
	{
		document.getElementById("playerStatus").innerHTML='';
	}

// End Player Status JS

	function getUrls()
	{
		return [{"url":"http%3A%2F%2Fsoundcloud.com%2Fmonsieuradi%2Fyou-feat-aaron-alexis","deadLink":true},{"url":"http%3A%2F%2Fsoundcloud.com%2Fcyrilhahn%2Fsolange-losing-you-cyril-hahn","deadLink":false},{"url":"http%3A%2F%2Fsoundcloud.com%2Falpines%2Fchances-cyril-hahn","deadLink":false},{"url":"http%3A%2F%2Fsoundcloud.com%2Fcyrilhahn%2Fdestinys-child-say-my-name","deadLink":false},{"url":"http%3A%2F%2Fsoundcloud.com%2Fkarmaartists%2Fmonsieur-adi-coming-back-to","deadLink":false}];
	}

// End Player Status JS

// Start Local Playlist JS

	var trackNumber = 0;
	for (var i = 0; i < getUrls().length; i++)
	{
		if (getUrls()[i]["deadLink"] == true)
		{
			trackNumber++;
		}
	}
	if (trackNumber >= 0)
	{
		playTrackWithAutoplay(trackNumber,getUrls()[trackNumber]["url"],"false");
	}
	function play()
	{
		var widgetIframe = document.getElementById('sc-widget');
		var widget = SC.Widget(widgetIframe);
		widget.play();
	}
	function nextTrack() {
	
		 var maxIndex = getUrls().length - 1;
		 if (trackNumber < maxIndex)
		 {
			trackNumber++;
			if (getUrls()[trackNumber]["deadLink"])
			{
				nextTrack();
			}
		 }
		 playTrack(trackNumber,getUrls()[trackNumber]["url"]);
	}

	function prevTrack() {
		 if (trackNumber > 0)
		 {
			trackNumber--;
			if (getUrls()[trackNumber]["deadLink"])
			{
				prevTrack();
			}
		 }
		 playTrack(trackNumber,getUrls()[trackNumber]["url"]);
	}

	function deleteTrack(trackIndex)
	{
		// For demo purposes
		alert('Delete track requested');
	}


	// Bind the FINISH event to the first track on the player

	var widgetIframe = document.getElementById('sc-widget');
	var widget = SC.Widget(widgetIframe);
	widget.bind(SC.Widget.Events.FINISH, nextTrack);

	// Set the CSS of the first track to be selected
	document.getElementById('r' + trackNumber).className="current";


	// End Local Playlist JS

</script>


</html>
